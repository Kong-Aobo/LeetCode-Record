```cpp
class Solution {
public:
    bool searchMatrix(vector<vector<int>>& matrix, int target) {
        auto row = upper_bound(matrix.begin(), matrix.end(), target, [](const int a, const vector<int>& b){ return a < b[0];});
        if(row == matrix.begin()) return false;
        row--;
        return binary_search(row->begin(), row->end(), target);
    }
};
```